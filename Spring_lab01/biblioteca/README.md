# Spring Boot приложение для управления библиотекой

#### Calincova Sofia, I2302

## Введение

Этот проект представляет собой Spring Boot приложение для управления библиотекой. 
Оно поддерживает CRUD-операции и использует JPA для работы с базой данных. 
Основной целью является создание удобного интерфейса для работы с книгами, авторами, издателями и категориями.

### Функциональные возможности

* Управление авторами (добавление, редактирование, удаление, просмотр);
* Управление книгами, их категориями и издателями;
* Управление библиотекой (хранение коллекции книг);
* Взаимодействие через DTO, а не напрямую с сущностями;
* Работа с реляционной базой данных посредством JPA.

## Архитектура проекта

### Используемые технологии

* **Spring Boot** - основной фреймворк;
* **Spring Data JPA** - для взаимодействия с базой данных;
* **Maven** - для управления зависимостями;
* **Lombok** - для упрощения работы с сущностями;
* **Spring Web** - для разработки REST API.

### Структура слоёв

* **Контроллеры (Controllers)**: управляют HTTP-запросами и вызывают сервисы.
* **Сервисы (Services)**: бизнес-логика приложения.
* **Репозитории (Repositories)**: работа с базой данных через JPA.
* **DTO (Data Transfer Objects)**: объекты для передачи данных.

## Описание сущностей и их связей

### **Пример: Book (Книга)**

**Описание:** Книга является основной сущностью системы. Она имеет связь с автором, издателем и категориями.

**Связи:**

* Принадлежит одному автору (**Many-to-One**).
* Имеет одного издателя (**Many-to-One**).
* Может принадлежать к нескольким категориям (**Many-to-Many**).

### **Структура класса Author**

```java
@Entity
@Getter
@Setter
@NoArgsConstructor
@AllArgsConstructor
public class Author {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    private String name;

    @OneToMany(mappedBy = "author", cascade = CascadeType.ALL)
    private List<Book> books;
}
```

### **Использование CRUD-операций**

В Insomnia ввожы ссылку и выбираю метод который хочу реализовать, например 
1. для **создания автора** 
ввожу http://localhost:8080/authors, выбираю POST и ввожу {
"name": "Лев Толстой"
}
после чего отправляю запрос и получаю статус 200


2. **Вывод всех авторов**
   http://localhost:8080/authors, GET


3. **Вывод автора по ID**
   http://localhost:8080/authors/1, GET


4. **Обновление информации об авторе**
   http://localhost:8080/authors/1, PUT


5. **Удаление автора**
   http://localhost:8080/authors/1, DELETE

## Важные концепции

### **JPA аннотации инжекции**

* `@Entity` - обозначает, что класс является сущностью JPA.
* `@Id` - идентификатор сущности.
* `@GeneratedValue(strategy = GenerationType.IDENTITY)` - автоматическая генерация ID.
* `@ManyToOne`, `@OneToMany`, `@ManyToMany`, `@OneToOne` - аннотации для описания связей между таблицами.

### **Lombok Аннотации**

* `@Getter` и `@Setter` - создают геттеры и сеттеры автоматически.
* `@NoArgsConstructor` - создаёт конструктор без аргументов.
* `@AllArgsConstructor` - создаёт конструктор со всеми аргументами.
* `@Data` - объединяет в себе `@Getter`, `@Setter`, `@ToString`, `@EqualsAndHashCode` и `@RequiredArgsConstructor`.

### **JPA Репозиторий**

**Что это?**  
JPA Repository — это интерфейс, предоставляющий методы для работы с базой данных.

**Для чего он нужен?**

* Упрощает взаимодействие с базой данных.
* Позволяет легко реализовать CRUD-операции без написания SQL-запросов.
* Использует Spring Data JPA для автоматического создания запросов.

### **DTO (Data Transfer Object)**

**Для чего нужен DTO?**

* Используется для передачи данных между слоями приложения.
* Позволяет скрыть детали сущностей.
* Предотвращает прямое изменение данных в базе через сущности.
* В отличие от сущностей, в DTO передаётся `id` в конструктор.

### **Сервисный слой (Service Layer)**

**Для чего он нужен?**

* Реализует бизнес-логику приложения.
* Обрабатывает запросы, выполняет валидацию данных.
* Вызывает методы репозитория для взаимодействия с базой данных.

### **Контроллеры (Controllers)**

**Для чего они нужны?**

* Обрабатывают HTTP-запросы.
* Возвращают ответы в виде JSON.
* Используют сервисы для выполнения операций над данными.

### **Инжекция репозитория**

Репозиторий можно инжектировать в сервис двумя способами:

**Через поле:**

```java
@Service
public class BookService {
    @Autowired
    private BookRepository bookRepository;
}
```

**Через конструктор:**

```java
@Service
public class BookService {
    private final BookRepository bookRepository;

    @Autowired
    public BookService(BookRepository bookRepository) {
        this.bookRepository = bookRepository;
    }
}
```

## Вывод

В ходе выполнения данной работы были изучены и применены принципы построения Spring Boot приложения,
использующего JPA и REST API. Было реализовано разделение на уровни контроллеров, сервисов и репозиториев, 
что позволило обеспечить гибкость и масштабируемость системы. Использование Lombok упростило код, а применение DTO позволило минимизировать зависимость представлений от сущностей базы данных.